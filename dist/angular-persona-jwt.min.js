!function(n){"use strict";n.module("angular-persona-jwt",["angular-persona-jwt.services","angular-persona-jwt.directives"])}(angular),function(n){"use strict";function e(n){function e(){n.navigator.id.request()}return{restrict:"EA",scope:{onlogin:"="},transclude:!0,controller:function(){this.login=e},controllerAs:"persona",template:'<div ng-transclude ng-click="persona.login()"></div>'}}function o(n){function e(){n.navigator.id.logout()}return{restrict:"EA",transclude:!0,scope:!0,controller:["$scope","persona",function(n,o){this.logout=e,n.$watch(function(){return o.loggedInUser},function(e){e&&n.onLogin()})}],controllerAs:"persona",template:'<div ng-transclude ng-click="persona.logout()"></div>'}}e.$inject=["$window"],o.$inject=["$window"],n.module("angular-persona-jwt.directives",[]).directive("personaLogin",e).directive("personaLogout",o)}(angular),function(n){"use strict";function e(e,o){function t(n){var e={};return e.login=function(o){var t={assertion:o,audience:i.audience};n.post(i.baseUrl+"/login",t).success(function(n){e.loggedUser=n.user,r.localStorage.setItem(i.tokenName,n.token)}).error(function(n){console.log(n)})},e.logout=function(){r.localStorage.removeItem(i.tokenName),e.loggedUser=null},r.navigator.id.watch({loggedInUser:e.loggedUser,onlogin:e.login,onlogout:e.logout}),e}var r=e.$get(),i={baseUrl:"localhost",audience:r.location.href,tokenName:"token"};this.config=function(e){i=n.extend(i,e),o.interceptors.push(["$q",function(n){return{request:function(n){var e=r.localStorage.getItem(i.tokenName);return e&&(n.headers.Authorization="Bearer "+e),n},responseError:function(e){return n.reject(e)}}}])},t.$inject=["$http"],this.$get=t}e.$inject=["$windowProvider","$httpProvider"],n.module("angular-persona-jwt.services",[]).provider("persona",e)}(angular);