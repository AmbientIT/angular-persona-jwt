!function(e){"use strict";e.module("angular-persona-jwt",["angular-persona-jwt.services","angular-persona-jwt.directives"])}(angular),function(e){"use strict";function n(e){function n(){e.navigator.id.request()}return{restrict:"EA",scope:{onlogin:"="},transclude:!0,controller:function(){this.login=n},controllerAs:"persona",template:'<div ng-transclude ng-click="persona.login()"></div>'}}function o(e){function n(){e.navigator.id.logout()}return{restrict:"EA",transclude:!0,scope:!0,controller:["$scope","persona",function(e,o){this.logout=n,e.$watch(function(){return o},function(){o.loggedUser&&e.onLogin()},!0)}],controllerAs:"persona",template:'<div ng-transclude ng-click="persona.logout()"></div>'}}n.$inject=["$window"],o.$inject=["$window"],e.module("angular-persona-jwt.directives",[]).directive("personaLogin",n).directive("personaLogout",o)}(angular),function(e){"use strict";function n(n,o){function t(e){var n={};return n.login=function(o){var t={assertion:o,audience:i.audience};e.post(i.baseUrl+"/login",t).success(function(e){n.loggedUser=e.user,r.localStorage.setItem(i.tokenStorageKey,e.token)}).error(function(e){console.log(e)})},n.logout=function(){r.localStorage.removeItem(i.tokenStorageKey),n.loggedUser=null},r.navigator.id.watch({loggedInUser:n.loggedUser,onlogin:n.login,onlogout:n.logout}),n}var r=n.$get(),i={baseUrl:"localhost",audience:r.location.href,tokenStorageKey:"angular-persona-jwt-token"};this.config=function(n){i=e.extend(i,n),o.interceptors.push(["$q",function(e){return{request:function(e){var n=r.localStorage.getItem(i.tokenStorageKey);return n&&(e.headers.Authorization="Bearer "+n),e},responseError:function(n){return e.reject(n)}}}])},t.$inject=["$http"],this.$get=t}n.$inject=["$windowProvider","$httpProvider"],e.module("angular-persona-jwt.services",[]).provider("persona",n)}(angular);